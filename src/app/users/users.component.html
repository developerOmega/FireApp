<form class="form" action="/" method="POST" >

  <div class="field left">
    <label for="name"> Nombre </label>
    <input type="text" id="name" name="name" [(ngModel)]="user.data.name" >
  </div>

  <div class="field left">
    <label for="date"> Fecha </label>
    <input type="date" id="date" name="date" [(ngModel)]="user.data.datetime" >
  </div>

  <div class="field left">
    <label for="tell"> Telefono </label>
    <input type="number" id="tell" name="tell" [(ngModel)]="user.data.tell" >
  </div>

  <div class="field right">
    <label for="email"> Emails </label>
    <input type="email" id="email" name="email" [(ngModel)]="email" (change)="addEmail()" >

    <div class="items">
      <button class="item" type="button" *ngFor="let email of user.data.emails" (click)="dropEmail(email)">
        <p> {{ email }} </p> 
      </button>
    </div>
  </div>

  <button 
    class="btn left all" 
    type="button"
    *ngIf = "isNew"
    (click)="addUser()" >  
    Agregar 
  </button>

  <button 
    class="btn left" 
    type="button"
    *ngIf = "!isNew"   
    (click)="updateUser()" >  
    Guardar 
  </button>
  
  <button 
    class="btn right" 
    type="button"
    *ngIf = "!isNew" 
    (click)="cleanUser()" >  
    Nuevo 
  </button>

</form>

<table class="table">
  <thead>
    <tr>
      <th> Nombre </th>
      <th> Fecha </th>
      <th> Telefono </th>
      <th> Emails </th>
      <th> No. Emails </th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users" >
      <td> {{ user.data.name }} </td>
      <td> {{ user.data.datetime }} </td>
      <td> {{ user.data.tell }} </td>
      <td>
        <div class="items" *ngFor="let email of user.data.emails" >
          <p>{{ email }}</p>
        </div> 
      </td>
      <td> {{ user.data.no_emails }} </td>
      <td>
        <button class="btn" type="button" (click)="selectUser(user)" > Editar </button>
        <button class="btn" type="button" (click)="deleteUser(user)"> Eliminar </button>
      </td>
    </tr>
  </tbody>
</table>
